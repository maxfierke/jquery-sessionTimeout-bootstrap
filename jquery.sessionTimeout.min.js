!function(a){jQuery.sessionTimeout=function(b){function c(b){switch(b){case"start":f=setTimeout(function(){a.each(m.closeModals,function(b,c){a("#"+c).modal("hide")}),i=document.title,document.title=m.titleMessage,a("#sessionTimeout-dialog").modal("show"),d("start"),e("start")},m.warnAfter);break;case"stop":clearTimeout(f)}}function d(a){switch(a){case"start":g=setTimeout(function(){window.location=m.redirUrl},m.redirAfter-m.warnAfter);break;case"stop":clearTimeout(g)}}function e(b){switch(b){case"start":j=(m.redirAfter-m.warnAfter)/1e3,h=setInterval(function(){j-=1,a("#sessionTimeout-dialog-logout").text(m.logoutBtn+" ("+j+")")},1e3);break;case"stop":clearInterval(h),a("#sessionTimeout-dialog-logout").text(m.logoutBtn)}}var f,g,h,i,j,k=[],l={title:"Your session is about to expire!",message:"Your session is about to expire.",titleMessage:"Warning: Time Out",stayConnectedBtn:"Stay connected",logoutBtn:"Logout",closeModals:k,keepAliveUrl:"/keep-alive",redirUrl:"/timed-out",logoutUrl:"/log-out",warnAfter:9e5,redirAfter:12e5,resetOnAjaxCall:!1},m=l;b&&(m=a.extend(l,b)),a("body").append('<div class="modal fade" id="sessionTimeout-dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+m.title+'</h4></div><div class="modal-body">'+m.message+'</div><div class="modal-footer"><button id="sessionTimeout-dialog-logout" type="button" class="btn btn-danger">'+m.logoutBtn+'</button><button id="sessionTimeout-dialog-keepalive" type="button" class="btn btn-success" data-dismiss="modal">'+m.stayConnectedBtn+"</button></div></div></div></div>"),a("#sessionTimeout-dialog-logout").on("click",function(){window.location=m.logoutUrl}),a("#sessionTimeout-dialog").on("hide.bs.modal",function(){a.ajax({type:"POST",url:m.keepAliveUrl}),document.title=i,d("stop"),e("stop"),c("start")}),m.resetOnAjaxCall&&a.ajaxPrefilter(function(a){c("stop"),d("stop"),e("stop"),c("start")}),c("start")}}(jQuery);